<header>
    <app-admin></app-admin>
</header>

<div class="alert alert-success" *ngIf="msg !=undefined"> {{msg}}</div>
<div class="alert alert-danger" *ngIf="errorMsg != undefined">{{errorMsg}}</div>


<div *ngIf="updateDiv">
    <Div class="mt-2 text-center" ><H1 >Update Product</H1> </Div>

    <form #frm="ngForm" (ngSubmit)="updateProduct()">
        <div>Product ID</div>
        <div><input type="number" name="productId" [(ngModel)]="modifyProduct.productId" required #productId="ngModel" class="form-control" disabled></div>

        <div>Product Name</div>
        <div><input type="text" name="productName" [(ngModel)]="modifyProduct.productName" required #productName="ngModel" class="form-control"/></div>
        <div class="alert alert-danger" *ngIf="productName.invalid && productName.touched"> Product Name is required</div>

        <div>Price</div>
        <div><input type="number" name="price" [(ngModel)]="modifyProduct.price" required #price="ngModel" class="form-control"/></div>
        <div class="alert alert-danger" *ngIf="price.invalid && price.touched"> Price is required</div>

        <div>Color</div>
        <div><input type="text" name="color" [(ngModel)]="modifyProduct.color" required #color="ngModel" class="form-control"/></div>
        <div class="alert alert-danger" *ngIf="color.invalid && color.touched"> Color is required</div>


        <div>Dimensions</div>
        <div><input type="text" name="dimension" [(ngModel)]="modifyProduct.dimension" required #dimension="ngModel" class="form-control"/></div>
        <div class="alert alert-danger" *ngIf="dimension.invalid && dimension.touched"> Product dimension is required</div>


        <div>Specification</div>
        <div><input type="text" name="specification" [(ngModel)]="modifyProduct.specification" required #specification="ngModel" class="form-control"/></div>
        <div class="alert alert-danger" *ngIf="specification.invalid && specification.touched"> Product Specification is required</div>


        <div>Manufaturer</div>
        <div><input type="text" name="manufacturer" [(ngModel)]="modifyProduct.manufacturer" required #manufacturer="ngModel" class="form-control"/></div>
        <div class="alert alert-danger" *ngIf="manufacturer.invalid && manufacturer.touched"> Product Manufacturer is required</div>


        <div>Product Quantity</div>
        <div><input type="text" name="quantity" [(ngModel)]="modifyProduct.quantity" required #quantity="ngModel" class="form-control"/></div>
        <div class="alert alert-danger" *ngIf="quantity.invalid && quantity.touched"> Product Quantity is required</div>

        <div>Category</div>
        <select placeholder=catId name="catId" id=" catId" [(ngModel)]="modifyProduct.catId" #catId="ngModel" required class="form-control">
          <option *ngFor="let category of categories" value={{category.catId}}>{{ category.categoryName }}</option>
        </select>
        <div class="alert alert-danger" *ngIf="catId.invalid && catId.touched"> Category is required</div>

        <div class="mt-2 text-center">
            <input type="submit" value="Update Product" [disabled]="!frm.valid" class="btn btn-danger"/>
            <button type="button" (click)="cancel()" value="Cancel"   class="btn btn-success">Cancel</button>
        </div>

    </form>
</div>

<div *ngIf="!updateDiv" >
    <Div class="mt-2 text-center" ><b>View All Products</b> </Div>

    <table id="category" class="table table-primary table-striped table-hover col-md-8 mx-auto mt-3" border="1">

        <tr>
            <th>Product ID</th>
            <th>Product Name</th>
            <th>Price</th>
            <th>Color</th>
            <th>Dimensions</th>
            <th>Specification</th>
            <th>Manufacturer</th>
            <th>Quantity</th>
            <th>Operations</th>


        </tr>
        <tr *ngFor="let product of products">
            <td>{{product.productId}}</td>
            <td>{{product.productName | titlecase}}</td>
            <td>{{product.price |currency:'INR':'code'}}</td>
            <td>{{product.color| titlecase}}</td>
            <td>{{product.dimension | titlecase}}</td>
            <td>{{product.specification| titlecase}}</td>
            <td>{{product.manufacturer | titlecase}}</td>
            <td>{{product.quantity | number}}</td>
    
                <button type="button" (click)="update(product)" value="Update"   class="btn2 btn-success">Update</button>
                
                <button type="button" (click)="removeProduct(product.productId)" value="Delete"  class="btn2 btn-danger">Delete</button>

        </tr>

    </table>
</div>
